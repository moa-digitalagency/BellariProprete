{% extends 'admin/base.html' %}

{% block content %}
<div class="max-w-4xl">
    <a href="{{ url_for('admin_seo') }}" class="text-blue-600 hover:underline mb-4 inline-block">← Retour</a>
    <h1 class="text-2xl font-bold mb-8">SEO - {{ seo.page_name|capitalize }}</h1>

    <form method="POST" enctype="multipart/form-data" class="space-y-8">
        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-lg font-semibold mb-6">Méta-données Principales</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Titre SEO <span class="text-gray-400">(55-60 caractères idéalement)</span></label>
                    <input type="text" name="title" maxlength="200" value="{{ seo.title or '' }}" class="w-full px-4 py-2 border rounded-lg">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description <span class="text-gray-400">(150-160 caractères)</span></label>
                    <textarea name="description" rows="3" maxlength="500" class="w-full px-4 py-2 border rounded-lg">{{ seo.description or '' }}</textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Mots-clés <span class="text-gray-400">(séparés par des virgules)</span></label>
                    <input type="text" name="keywords" value="{{ seo.keywords or '' }}" class="w-full px-4 py-2 border rounded-lg">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-lg font-semibold mb-6">Paramètres Avancés</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">URL Canonique</label>
                    <input type="url" name="canonical_url" value="{{ seo.canonical_url or '' }}" class="w-full px-4 py-2 border rounded-lg" placeholder="https://...">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Robots</label>
                    <select name="robots" class="w-full px-4 py-2 border rounded-lg">
                        <option value="index, follow" {% if seo.robots == 'index, follow' %}selected{% endif %}>index, follow</option>
                        <option value="noindex, follow" {% if seo.robots == 'noindex, follow' %}selected{% endif %}>noindex, follow</option>
                        <option value="index, nofollow" {% if seo.robots == 'index, nofollow' %}selected{% endif %}>index, nofollow</option>
                        <option value="noindex, nofollow" {% if seo.robots == 'noindex, nofollow' %}selected{% endif %}>noindex, nofollow</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Type Open Graph</label>
                    <select name="og_type" class="w-full px-4 py-2 border rounded-lg">
                        <option value="website" {% if seo.og_type == 'website' %}selected{% endif %}>website</option>
                        <option value="article" {% if seo.og_type == 'article' %}selected{% endif %}>article</option>
                        <option value="product" {% if seo.og_type == 'product' %}selected{% endif %}>product</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Twitter Card</label>
                    <select name="twitter_card" class="w-full px-4 py-2 border rounded-lg">
                        <option value="summary" {% if seo.twitter_card == 'summary' %}selected{% endif %}>summary</option>
                        <option value="summary_large_image" {% if seo.twitter_card == 'summary_large_image' %}selected{% endif %}>summary_large_image</option>
                    </select>
                </div>
            </div>
            <div class="mt-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Image de partage (OG Image)</label>
                {% if seo.meta_image %}<img src="{{ url_for('static', filename='images/' + seo.meta_image) }}" class="h-20 mb-2 rounded">{% endif %}
                <input type="file" name="meta_image" accept="image/*" class="w-full text-sm">
            </div>
        </div>

        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-lg font-semibold mb-6">Code Personnalisé</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Données Structurées (JSON-LD)</label>
                    <textarea name="structured_data" rows="6" class="w-full px-4 py-2 border rounded-lg font-mono text-sm" placeholder='{"@context": "https://schema.org", ...}'>{{ seo.structured_data or '' }}</textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Code Head personnalisé (pour cette page)</label>
                    <textarea name="custom_head_code" rows="4" class="w-full px-4 py-2 border rounded-lg font-mono text-sm" placeholder="<!-- Scripts spécifiques... -->">{{ seo.custom_head_code or '' }}</textarea>
                </div>
            </div>
        </div>

        <div class="flex gap-4">
            <button type="submit" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700">Enregistrer</button>
            <a href="{{ url_for('admin_seo') }}" class="px-8 py-3 border border-gray-300 rounded-lg hover:bg-gray-50">Annuler</a>
        </div>
    </form>
</div>
{% endblock %}
